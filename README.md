# AI Code Review Agent · GitHub Action

![Marketplace](https://img.shields.io/badge/GitHub%20Marketplace-AI%20Code%20Review%20Agent-blue?logo=github)
![CI](https://github.com/samushi/react-code-review-action/actions/workflows/test-action.yml/badge.svg)

Automated, LLM‑powered code‑reviews for **React** & **Next.js** pull‑requests.
The action scores the PR, posts a markdown report and—if you wish—fails the
CI pipeline when quality drops below your threshold.

---

## ✨ Features

| Icon | Feature                   | Description                                                                                                       |
| :--: | :------------------------ | :---------------------------------------------------------------------------------------------------------------- |
|  🤖  | **AI‑powered analysis**   | Works with **OpenAI GPT‑4/4o**, **Anthropic Claude 3**, **Google Gemini‑Pro** or any **Ollama/Llama 3** endpoint. |
|  🔍  | **React / Next.js focus** | Parses `.js(x)` / `.ts(x)` diffs, flags common antipatterns & security issues.                                    |
|  📊  | **Structured report**     | Score (1‑10) • recommendation • array of findings (JSON).                                                         |
|  🎯  | **Fully configurable**    | Glob filters, severity threshold, comment toggle.                                                                 |
|  🚀  | **Plug‑and‑play**         | One `uses:` line — no server to run.                                                                              |

---

## Quick Start (OpenAI)

```yaml
name: AI Code Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: samushi/react-code-review-action@v1
        with:
          provider: openai                   # openai | anthropic | gemini | ollama
          github-token: ${{ secrets.GITHUB_TOKEN }}
          openai-api-key: ${{ secrets.OPENAI_API_KEY }}
          # optional
          ai-model: gpt-4o-mini
          min-score-threshold: 7
          fail-on-low-score: false
```

> **Secrets:** add the required API key for the chosen provider (`OPENAI_API_KEY`,
> `ANTHROPIC_API_KEY`, `GEMINI_API_KEY`) under **Settings → Secrets → Actions**.
> `GITHUB_TOKEN` is auto‑generated by GitHub.

---

## 📥 Inputs

| Name                  |         Required        | Default                     | Description                                                                   |
| --------------------- | :---------------------: | --------------------------- | ----------------------------------------------------------------------------- |
| `provider`            |            No           | `openai`                    | `openai` · `anthropic` · `gemini` · `ollama`                                  |
| `github-token`        |         **Yes**         | `${{ github.token }}`       | Token with `repo` scope to post PR comments.                                  |
| `openai-api-key`      |   if `provider=openai`  | –                           | OpenAI secret key.                                                            |
| `anthropic-api-key`   | if `provider=anthropic` | –                           | Anthropic Claude key.                                                         |
| `gemini-api-key`      |   if `provider=gemini`  | –                           | Google Generative AI key.                                                     |
| `ollama-base-url`     |   if `provider=ollama`  | `http://localhost:11434`    | Base URL of Ollama server.                                                    |
| `ai-model`            |            No           | provider default            | e.g. `gpt-4-turbo-preview`, `claude-3-opus-20240229`, `gemini-pro`, `llama3`. |
| `file-patterns`       |            No           | `**/*.{js,jsx,ts,tsx}`      | Comma‑separated glob patterns to include.                                     |
| `exclude-patterns`    |            No           | `**/{node_modules,dist}/**` | Patterns to ignore.                                                           |
| `min-score-threshold` |            No           | `7`                         | Fail CI if score < threshold & `fail-on-low-score=true`.                      |
| `post-comment`        |            No           | `true`                      | Post report as PR comment.                                                    |
| `fail-on-low-score`   |            No           | `false`                     | Mark job failed when quality is low.                                          |

---

## 📤 Outputs

| Output           | Description                                 |
| ---------------- | ------------------------------------------- |
| `review-score`   | Numeric score (1‑10).                       |
| `recommendation` | `POSITIVE`, `NEEDS_CHANGES`, or `NEGATIVE`. |
| `issues-found`   | Total findings reported by the AI.          |
| `review-summary` | One‑paragraph summary.                      |

---

## Provider Examples

### Anthropic Claude 3 Sonnet

```yaml
with:
  provider: anthropic
  anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}
  ai-model: claude-3-sonnet-20240229
```

### Google Gemini‑Pro

```yaml
with:
  provider: gemini
  gemini-api-key: ${{ secrets.GEMINI_API_KEY }}
  ai-model: gemini-pro
```

### Local Llama 3 via Ollama

```yaml
with:
  provider: ollama
  ollama-base-url: http://localhost:11434
  ai-model: llama3
  post-comment: false   # dry‑run
```

---

## Roadmap

* Vue & Svelte support
* Inline annotations via GitHub Checks API
* SARIF export for security scanners

> Contributions are welcome – open an issue or PR! Licensed under **MIT**.
